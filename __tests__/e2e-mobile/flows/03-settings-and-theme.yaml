# Flow: Settings and Theme
# Tests settings modal and theme toggle functionality
# Run time: ~1 minute
#
# Tests:
# - Opening settings via header icon
# - Theme dropdown toggle (Light/Dark)
# - Display name field visibility
# - Sign out button presence
# - Closing settings modal

appId: com.tenk.scorekeeper.dev
---
- launchApp:
    clearState: true

# Login
- runFlow: "../helpers/_login.yaml"

# Verify on home screen
- assertVisible: "Home"
- takeScreenshot: "03-home-before-settings"

# Open settings via header icon (accessibilityLabel="Settings")
- tapOn:
    text: "Settings"

# Wait for settings modal - header shows "Settings"
- extendedWaitUntil:
    visible: "Settings"
    timeout: 5000

# Verify settings screen elements (actual section headers from SettingsScreen.tsx)
- assertVisible: "Appearance"
- assertVisible: "Theme"
- assertVisible: "Account"
- assertVisible: "Display Name"
- assertVisible: "Sign Out"
- takeScreenshot: "03-settings-screen"

# Theme uses radio buttons - Light and Dark are visible directly (no dropdown)
# Just verify they're visible and tap to change
- assertVisible: "Light"
- assertVisible: "Dark"
- takeScreenshot: "03-theme-options"

# Select Dark theme
- tapOn: "Dark"

# Wait for theme to apply
- scroll
- takeScreenshot: "03-theme-changed"

# Close settings via X button
- tapOn:
    text: "×"

# Verify back on home screen
- extendedWaitUntil:
    visible: "Home"
    timeout: 5000
- takeScreenshot: "03-home-new-theme"

# Reopen settings and restore light theme
- tapOn:
    text: "Settings"

- extendedWaitUntil:
    visible: "Appearance"
    timeout: 5000

# Tap Light to restore original theme
- tapOn: "Light"
- scroll

# Close settings
- tapOn:
    text: "×"

# Final verification
- extendedWaitUntil:
    visible: "Home"
    timeout: 5000
- takeScreenshot: "03-settings-complete"
